<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <link rel="stylesheet" href="../css/jquery.mobile-1.4.5.css">
    <script src="../js/common.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

    <script language = "javascript">

    var ajaxResult="";
    var ajaxResult2="";



    <!--주소록 내보내기:해당체크박스의 이름, 전화번호,이메일로 이루어진 id를  subString해서 사용-->
    $("#addressGet").click(function() {
      $("input:checked").each(function() {
                console.log("value값:"+test);
            });
    });


    <!--전체검색: 나중에 지울거. 화면 나오자마자 나와야함-->
    function listSearch(){
        navigate("employee.json", sucessFncMultiSndSample, errorFncMultiSndSample);
        $("#my-tbody").children().remove();
    }

    <!--더보기: 더보기 누르면 append로 더 붙여져야함-->
    function searchMore(){
        navigate("employee.json", sucessFncMultiSndSample, errorFncMultiSndSample);
    }

    <!--이름으로 검색-->
    function nameSearch(){
        var employeeName= document.getElementById('nameWrite').value;
        var params = {
                employeeName : employeeName,
             };
        navigate(params, "employeeName.json", sucessFncMultiSndSample, errorFncMultiSndSample);
        $("#my-tbody").children().remove();
    }

    <!--ajax통신 성공-->
    function sucessFncMultiSndSample(result) {
        console.log("sucessFncMultiSndSample>>>>>" + JSON.stringify(result));
        ajaxResult=JSON.stringify(result);
        ajaxResult2=JSON.parse(ajaxResult);

    <!--동적테이블만들기-->
        for(var i=0;i<ajaxResult2.length;i++){
            console.log('******************************');
            console.log("사원이름:"+ajaxResult2[i].NAME);
            console.log("직급:"+ajaxResult2[i].GRADE);
            console.log("전화번호:"+ajaxResult2[i].HP_NUM);
            console.log("이메일:"+ajaxResult2[i].EMAIL);
            console.log('******************************');

            var my_tbody = document.getElementById('my-tbody');
            // var row = my_tbody.insertRow(0); // 상단에 추가
            var row = my_tbody.insertRow( my_tbody.rows.length ); // 하단에 추가
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);

            cell1.innerHTML = "<input type=checkbox id='"+ajaxResult2[i].NAME+"/"+ajaxResult2[i].HP_NUM+"/"+ajaxResult2[i].EMAIL+"'>";
            cell2.innerHTML = "아이디:"+ajaxResult2[i].ID+
                              "<br>"+"이름:"+ajaxResult2[i].NAME+
                              "<br>"+"직급:"+ajaxResult2[i].GRADE+
                              "<br>"+"전화번호:"+"<a href='tel:"+ajaxResult2[i].HP_NUM+"'>"+ajaxResult2[i].HP_NUM+"</a>"+
                              "<br>"+"이메일:"+"<a href='mailto:"+ajaxResult2[i].EMAIL+"'>"+ajaxResult2[i].EMAIL+"</a>"+
                              "<br>";
        }
    }
    <!--ajax 통신 실패-->
    function errorFncMultiSndSample(result) {
        console.log("errorFncMultiSndSample>>>>>>" + JSON.stringify(result));
    }

   </script>

    <style>
      table {
        width: 100%;
        border: 1px solid #444444;
        border-collapse: collapse;
      }
      th, td {
        border: 1px solid #444444;
      }
    </style>
</head>
<body>
<div class="content" data-role="content">
    <input tyle="text" id="nameWrite">
    <button id="nameSearch" onclick="javascript:nameSearch(); return false;">이름검색</button>
    <button id="listSearch" onclick="javascript:listSearch(); return false;">전체검색</button>
    <button id="addressGet">가져오기</button>
<!--    <table>
        <tr>
            <th>이름</th>
&lt;!&ndash;            <th>직급</th>&ndash;&gt;
            <th>전화번호</th>
            <th>이메일</th>
        </tr>
        <tr>
            <td id="employee_name"></td>
&lt;!&ndash;            <td id="employee_grade"></td>&ndash;&gt;
            <td id="employee_hp_num"></td>
            <td id="employee_email"></td>

        </tr>
    </table>-->

    <table>
        <thead>
        <th>선택</th>
        <th>사용자번호</th>
        </thead>
        <tbody id="my-tbody"></tbody>
    </table>
    <button id="searchMore" onclick="javascript:searchMore(); return false;">더보기</button>

</div>
</body>
</html>