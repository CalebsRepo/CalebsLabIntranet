<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <link rel="stylesheet" href="../css/jquery.mobile-1.4.5.css">
    <script src="../js/common.js"></script>
    <script src="../js/login.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
    <script language="JavaScript">

        $(document).ready(function(){

            var chkSaveId = localStorage.getItem("chkSave");

            if(chkSaveId == "Y"){

                $("input:checkbox[id='saveIdIpt']").prop("checked", true);
                var savedId = localStorage.getItem("savedId");

                $('#id').val(savedId);
            }



        });



        function login(){

            var id = $('#id').val();
            var pwd = $('#pwd').val();

            if(id == null || id ==''){
                alert("아이디를 입력해주세요");
                return false;
            }

            if(pwd == null || pwd ==''){
                alert("비밀번호를 입력해주세요");
                return false;
            }

            var param = {"id" : id, "pwd" : pwd};
            //아이디 저장 체크 여부
            var saveChk = $("input:checkbox[id='saveIdIpt']").is(':checked');
            var result = callLogin(id,pwd);

            if(result != ""){

                if(saveChk == true){
                    localStorage.setItem("chkSave","Y");
                    localStorage.setItem("savedId",id);
                }else{
                    localStorage.setItem("chkSave","N");
                    localStorage.removeItem("savedId");
                }
               sessionStorage.setItem("userData",result);
               movePage("index.html");

            }else{
                alert("입력한 회원정보가 일치하지 않습니다");
            }
        }

    </script>

    <style>
        #loginDiv {background-color:white; padding:20% 20% 0 20%; height: 100%;}
        #logoImg {max-width:100%; max-height:100%; margin:auto; display:block; margin-bottom : 20%}
        #loginBtn {margin-top : 20px;}
        #saveIdIpt {left:0em; position:relative; margin-top:0px; top:5px}
        .ui-checkbox {display:inline}
        #findId {margin-left:28%}
    </style>
</head>

<body bgcolor="#E6E6FA">

<div id="loginDiv" class="container">

    <div id="imgDiv">
        <img src="../css/images/calebslab_CI_1_upper-300x108.png" id="logoImg">
        <label for="id">아이디</label>
        <input type="text" name="id" id="id" value="">
        <label for="pwd">비밀번호</label>
        <input type="password" name="pwd" id="pwd" value="">
    </div>
    <div id="loginBtn" onclick="event.cancelBubble = true;">
        <button class="ui-btn ui-corner-all" onclick="login();">확인</button>
    </div>
    <div>
        <input type="checkbox" id="saveIdIpt">
        <a id="saveId">ID 저장</a>
        <a id="findId">ID</a> /
        <a id="findPw">PW</a> 찾기
    </div>
</div>

</body>
</html>